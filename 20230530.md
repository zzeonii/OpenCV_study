# QR코드 스캔 프로그램
- 바코드나 QR코드 인식을 하기 위해서는 pyzbar가 필요
- 'pip list | grep 항목' 으로 원하는 pip 항목을 볼 수 있다
- pyzbar 설치 : pip install pyzbar (https://pypi.org/project/pyzbar/) 
- 'pip list | grep pyzbar'을 통해 제대로 설치되었는지 확인
- sudo apt-get install libzbar0
- QR코드 만들기 : (https://qr.naver.com/code/createForm.naver)

### QR코드 확인
```python
import cv2
import pyzbar.pyzbar as pyzbar # pyzbar 가져오기
import matplotlib.pyplot as plt

img = cv2.imread('QR.jpg') # 이미지를 불러오기
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) # 3채널을 1채널로 변환


# plt.imshow(img) # 이미지를 확인해보기
# plt.imshow(gray, cmap='gray')
# matplot 실행하기
# plt.show()

decoded = pyzbar.decode(gray) # pyzbar로 decode를 해주기

# decode된 정보 확인하기
# print(decoded)

for d in decoded:
    print(d.type) # 데이터 타입을 알려준다
    print(d.data) # d.(주소 데이터)의 형태를 지니고 있다 
    print(d.data.decode('utf-8')) # 주소창만 표기
    
    # rectangle함수를 사용해서 QR코 외곽선을 만들기 
    cv2.rectangle(gray, (d.rect[0],d.rect[1]), (d.rect[0]+d.rect[2], d.rect[1]+d.rect[3]),(0, 0, 255), 10)

plt.imshow(gray)
plt.show()

```
![image](https://github.com/zzeonii/OpenCV_study/assets/129237950/82bc929c-af92-477b-a880-d6434805c495)

### 웹캠으로 QR코드 인식
```python
import cv2
# pyzbar 가져오기
import pyzbar.pyzbar as pyzbar

cap = cv2.VideoCapture(0)

i = 0
while(cap.isOpened()):
    ret, img = cap.read()

    if not ret:
        continue

    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

    decoded = pyzbar.decode(gray)
    
    for d in decoded:
        x, y, w, h = d.rect

        barcode_data = d.data.decode("utf-8")
        barcode_type = d.type

        cv2.rectangle(img, (x,y), (x+w, y+h), (0,0,255), 2)

        text = '%s (%s)' % (barcode_data, barcode_type)
        cv2.putText(img, text, (x,y), cv2.FONT_HERSHEY_SIMPLEX, 1, (0,255,255), 2, cv2.LINE_AA)

    cv2.imshow('img', img)

    key = cv2.waitKey(1)
    if key == ord('q'):
        break
    elif key == ord('s'):
        i += 1
        cv2.imwrite('c_%03d.jpg' %i, img)

cap.release()
cv2.destroyAllWindows()
```
![image](https://github.com/zzeonii/OpenCV_study/assets/129237950/2e1aa4ac-5b3d-4d19-9297-3f63e1e2b332)
