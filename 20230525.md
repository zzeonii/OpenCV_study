# 이미지 및 동영상

## 이미지 읽기
```python
import cv2

img_file = "../img/girl.jpg" # 표시할 이미지 경로            ---①
img = cv2.imread(img_file)    # 이미지를 읽어서 img 변수에 할당 ---②

if img is not None:
  cv2.imshow('IMG', img)      # 읽은 이미지를 화면에 표시      --- ③
  cv2.waitKey()               # 키가 입력될 때 까지 대기      --- ④
  cv2.destroyAllWindows()     # 창 모두 닫기            --- ⑤
else:
    print('No image file.')
```
![image](https://github.com/zzeonii/OpenCV_study/assets/129237950/d2e7d9d4-7a95-40b2-9a8f-60068fa582e0)
 
## 이미지 흑백 변환
```python
import cv2

img_file = "../img/girl.jpg" 
img = cv2.imread(img_file, cv2.IMREAD_GRAYSCALE)    # 회색으로 읽기

if img is not None:
  cv2.imshow('IMG', img)
  cv2.waitKey()
  cv2.destroyAllWindows()
else:
    print('No image file.')
```
- cv2.imread(path, flag)
  - path : 이미지 파일 경로
  - flag : 이미지를 어떻게 읽을지 방식 설정
    - cv2.IMREAD_COLOR(기본값): 색깔 이미지로 불러오기, 이때 투명도(alpha값)는 무시
    - cv2.IMREAD_GRAYSCALE: 이미지를 흑백톤으로 불러온다
    - cv2.IMREAD_UNCHANGED: 투명도(alpha값)를 포함해 이미지를 그대로 불러온다

![image](https://github.com/zzeonii/OpenCV_study/assets/129237950/02242e8c-ec3f-43a7-a26e-5dfd61ecefd2)

## 이미지 저장
```python
import cv2

img_file = '../img/girl.jpg'
save_file = '../img/girl_gray.jpg'

img = cv2.imread(img_file, cv2.IMREAD_GRAYSCALE)
cv2.imshow(img_file, img)
cv2.imwrite(save_file, img) #파일로 저장, 포맷은 확장에 따름
cv2.waitKey()
cv2.destroyAllWindows()
```
- cv2.imwrite()함수를 호출하면 img 변수에 담긴 사진 파일을 자신의 PC에 저장할 수 있다
- 상기 코드를 실행하면 img 디렉토리에 girl_gray.jpg라는 회색 사진이 생성

## 동영상 파일 읽기
### v1
```python
import cv2

video_file = "../img/big_buck.avi" # 동영상 파일 경로

cap = cv2.VideoCapture(video_file) # 동영상 캡쳐 객체 생성  ---①
if cap.isOpened():                 # 캡쳐 객체 초기화 확인
    while True:
        ret, img = cap.read()      # 다음 프레임 읽기      --- ②
        if ret:                     # 프레임 읽기 정상
            cv2.imshow(video_file, img) # 화면에 표시  --- ③
            cv2.waitKey(25)            # 25ms 지연(40fps로 가정)   --- ④
        else:                       # 다음 프레임 읽을 수 없음
            break                   # 재생 완료
else:
    print("can't open video.")      # 캡쳐 객체 초기화 실패
cap.release()                       # 캡쳐 자원 반납
cv2.destroyAllWindows()
```
### v2_프레임 수 구하기
```python
import cv2

video_file = "../img/big_buck.avi" # 동영상 파일 경로

cap = cv2.VideoCapture(video_file) # 동영상 캡쳐 객체 생성
if cap.isOpened():                 # 캡쳐 객체 초기화 확인
    fps = cap.get(cv2.CAP_PROP_FPS) # 프레임 수 구하기
    delay = int(1000/fps)
    print("FPS: %f, Delay: %dms" %(fps, delay))

    while True:
        ret, img = cap.read()      # 다음 프레임 읽기
        if ret:                     # 프레임 읽기 정상
            cv2.imshow(video_file, img) # 화면에 표시
            cv2.waitKey(delay)            # fps에 맞게 시간 지연
        else:
            break                   # 다음 프레임 읽을 수 없슴, 재생 완료
else:
    print("can't open video.")      # 캡쳐 객체 초기화 실패
cap.release()                       # 캡쳐 자원 반납
cv2.destroyAllWindows()
```
![image](https://github.com/zzeonii/OpenCV_study/assets/129237950/090480af-b59d-4c30-a4f1-7ed35665d29f)

# zzz
## 카메라(웹캠) 프레임 읽기
```python
import cv2

cap = cv2.VideoCapture(0)               # 0번 카메라 장치 연결 ---①
if cap.isOpened():                      # 캡쳐 객체 연결 확인
    while True:
        ret, img = cap.read()           # 다음 프레임 읽기
        if ret:
            cv2.imshow('camera', img)   # 다음 프레임 이미지 표시
            if cv2.waitKey(1) != -1:    # 1ms 동안 키 입력 대기 ---②
                break                   # 아무 키라도 입력이 있으면 중지
        else:
            print('no frame')
            break
else:
    print("can't open camera.")
cap.release()                           # 자원 반납
cv2.destroyAllWindows()
```
![image](https://github.com/zzeonii/OpenCV_study/assets/129237950/e7595b1d-d9c6-471f-a78e-431228eea750)

## 




